CREATE TABLE BOOKS(
ID INT PRIMARY KEY,
NAME VARCHAR(20) NOT NULL,
AUTHOR_NAME VARCHAR(20) NOT NULL
)

INSERT INTO BOOKS VALUES(1,'HARRY POTTER','JK ROWLING')
INSERT INTO BOOKS VALUES(2,'LORD OF RINGS','KUSH')

ALTER TABLE BOOKS
ADD COUNT INT CHECK(COUNT>=1)

UPDATE BOOKS 
SET COUNT=3
WHERE ID=1

SELECT * FROM BOOKS
SELECT COUNT(ID) FROM BOOKS 
CREATE TABLE LIBRARY_VISITOR_USER(
USER_ID INT PRIMARY KEY,
USER_NAME VARCHAR(20) NOT NULL,
AGE INT CHECK(AGE>=17) NOT NULL,
EMAIL VARCHAR(20) UNIQUE NOT NULL
)
ALTER TABLE LIBRARY_VISITOR_USER
DROP COLUMN EMAIL

ALTER TABLE LIBRARY_VISITOR_USER
ADD EMAIL VARCHAR(50) UNIQUE NOT NULL

INSERT INTO LIBRARY_VISITOR_USER VALUES (1,'KUSHAGRA',20,'VASHISTHA.KUSHAGRA22@GMAIL.COM')

SELECT * FROM LIBRARY_VISITOR_USER

CREATE TABLE BOOK_ISSUE (
BOOK_ISSUE_ID INT PRIMARY KEY,
BOOK_ID INT REFERENCES BOOKS(ID) NOT NULL,
ISSUER_ID INT REFERENCES LIBRARY_VISITOR_USER(USER_ID) NOT NULL,
BOOK_ISSUE_DATE DATE NOT NULL
)

INSERT INTO BOOK_ISSUE VALUES (5552,1,1,'2026-01-09')

CREATE ROLE LIBRARIAN
WITH LOGIN PASSWORD '123456'

CREATE ROLE LIBRARIAN_1
WITH LOGIN PASSWORD '12233445'

GRANT SELECT ,INSERT ,DELETE,UPDATE ON BOOKS TO LIBRARIAN_1 
GRANT SELECT ,INSERT ,DELETE,UPDATE ON LIBRARY_VISITOR_USER TO LIBRARIAN_1 
GRANT SELECT ,INSERT ,DELETE,UPDATE ON BOOK_ISSUE TO LIBRARIAN_1


REVOKE SELECT ,INSERT ,DELETE,UPDATE ON LIBRARY_VISITOR_USER FROM LIBRARIAN_1
REVOKE SELECT ,INSERT ,DELETE,UPDATE ON BOOKS FROM LIBRARIAN_1 
REVOKE SELECT ,INSERT ,DELETE,UPDATE ON BOOK_ISSUE FROM LIBRARIAN_1
